!function(t,e){"use strict";var o={configScriptId:"cachier-config",localStoragePrefix:"cachier-"},r=e.body||e.getElementsByTagName("body")[0],n=function(){var t=this.config=this.readConfig(o.configScriptId),e=t.dependencies;this.remainingDepsCount=0;for(var r in e)e.hasOwnProperty(r)&&this.resolve(r,e[r]);this.checkStatus()};n.prototype.readConfig=function(t){var o=e.getElementById(t),r=o.text;return JSON.parse(r)},n.prototype.resolve=function(t,e){var r=o.localStoragePrefix+t,n=localStorage.getItem(r);n?this.injectScript(n):this.loadScript(t,e)},n.prototype.injectScript=function(t){var o=e.createElement("script");o.text=t,r.appendChild(o)},n.prototype.loadScript=function(t,e){var o=this,r=new XMLHttpRequest;o.remainingDepsCount+=1,r.open("GET",e),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(o.remainingDepsCount-=1,o.injectScript(r.responseText),t&&(o.saveScript(t,r.responseText),o.checkStatus()))},r.send()},n.prototype.saveScript=function(t,e){var r=o.localStoragePrefix+t;localStorage.setItem(r,e)},n.prototype.checkStatus=function(){this.remainingDepsCount<=0&&this.loadScript(null,this.config.main)},n.prototype.reset=function(){for(var t in localStorage)localStorage.hasOwnProperty(t)&&0===t.indexOf(o.localStoragePrefix)&&localStorage.removeItem(t)},t.cachier=new n}(window,document);